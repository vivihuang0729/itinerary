<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŠåŠ å“¥ä¹‹æ—…è¨˜å¸³ | Yunyi's Chicago Trip</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang TC', 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(to bottom right, #0f172a, #1e3a8a, #0f172a);
            min-height: 100vh;
            color: #fff;
            padding: 1rem;
        }
        
        .container {
            max-width: 72rem;
            margin: 0 auto;
        }
        
        .card {
            background: linear-gradient(to bottom right, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9));
            backdrop-filter: blur(12px);
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(100, 116, 139, 0.5);
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        h1 {
            font-size: 1.875rem;
            font-weight: bold;
        }
        
        h2 {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .subtitle {
            color: #cbd5e1;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: linear-gradient(to right, #3b82f6, #6366f1);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary:hover {
            background: linear-gradient(to right, #2563eb, #4f46e5);
        }
        
        .btn-secondary {
            background: #475569;
            color: #e2e8f0;
        }
        
        .btn-secondary:hover {
            background: #334155;
        }
        
        .btn-edit {
            background: transparent;
            color: #60a5fa;
            padding: 0.5rem;
        }
        
        .btn-edit:hover {
            background: rgba(30, 58, 138, 0.3);
        }
        
        .btn-delete {
            background: transparent;
            color: #fb7185;
            padding: 0.5rem;
        }
        
        .btn-delete:hover {
            background: rgba(136, 19, 55, 0.3);
        }
        
        .grid {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }
        
        .stat-card {
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card-blue {
            background: linear-gradient(to bottom right, #2563eb, #06b6d4);
        }
        
        .stat-card-green {
            background: linear-gradient(to bottom right, #059669, #14b8a6);
        }
        
        .stat-card-purple {
            background: linear-gradient(to bottom right, #7c3aed, #a855f7);
        }
        
        .stat-card-red {
            background: linear-gradient(to bottom right, #e11d48, #dc2626);
        }
        
        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 0.875rem;
            opacity: 0.9;
        }
        
        .stat-value {
            font-size: 1.875rem;
            font-weight: bold;
        }
        
        .stat-subtext {
            font-size: 0.875rem;
            opacity: 0.9;
            margin-top: 0.25rem;
        }
        
        .form-grid {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            margin-bottom: 1rem;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-size: 0.875rem;
            font-weight: 500;
            color: #cbd5e1;
            margin-bottom: 0.25rem;
        }
        
        input, select {
            padding: 0.5rem;
            border-radius: 0.5rem;
            border: 1px solid #475569;
            background: rgba(51, 65, 85, 0.5);
            color: white;
            font-size: 0.875rem;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        input::placeholder {
            color: #64748b;
        }
        
        .progress-item {
            margin-bottom: 1rem;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }
        
        .progress-label {
            font-weight: 500;
            color: #e2e8f0;
        }
        
        .progress-value {
            color: #cbd5e1;
        }
        
        .progress-bar {
            width: 100%;
            height: 0.75rem;
            background: rgba(51, 65, 85, 0.5);
            border-radius: 9999px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            transition: width 0.5s;
        }
        
        .progress-green {
            background: linear-gradient(to right, #10b981, #14b8a6);
        }
        
        .progress-yellow {
            background: linear-gradient(to right, #f59e0b, #eab308);
        }
        
        .progress-red {
            background: linear-gradient(to right, #fb7185, #dc2626);
        }
        
        .expense-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .expense-item {
            border: 1px solid rgba(100, 116, 139, 0.5);
            background: rgba(30, 41, 59, 0.4);
            border-radius: 0.5rem;
            padding: 1rem;
            transition: background 0.2s;
        }
        
        .expense-item:hover {
            background: rgba(51, 65, 85, 0.4);
        }
        
        .expense-content {
            display: flex;
            justify-content: space-between;
            align-items: start;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .expense-info {
            flex: 1;
            min-width: 0;
        }
        
        .expense-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.5rem;
        }
        
        .tag {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .tag-blue {
            background: rgba(30, 58, 138, 0.5);
            color: #93c5fd;
            border: 1px solid rgba(59, 130, 246, 0.5);
        }
        
        .tag-gray {
            background: rgba(51, 65, 85, 0.5);
            color: #cbd5e1;
            border: 1px solid rgba(100, 116, 139, 0.5);
        }
        
        .tag-cyan {
            background: rgba(22, 78, 99, 0.5);
            color: #67e8f9;
            border: 1px solid rgba(6, 182, 212, 0.5);
        }
        
        .expense-name {
            font-weight: 500;
            color: white;
            margin-bottom: 0.25rem;
        }
        
        .expense-notes {
            font-size: 0.875rem;
            color: #94a3b8;
        }
        
        .expense-right {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .expense-amount {
            text-align: right;
        }
        
        .amount-main {
            font-weight: bold;
            color: white;
        }
        
        .amount-sub {
            font-size: 0.75rem;
            color: #94a3b8;
        }
        
        .expense-actions {
            display: flex;
            gap: 0.25rem;
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #94a3b8;
        }
        
        .empty-icon {
            font-size: 3rem;
            opacity: 0.5;
            margin-bottom: 1rem;
        }
        
        .empty-text {
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
        }
        
        .empty-subtext {
            font-size: 0.875rem;
        }
        
        .footer {
            text-align: center;
            color: #94a3b8;
            font-size: 0.875rem;
            margin-top: 1.5rem;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }
            
            .expense-content {
                flex-direction: column;
            }
            
            .expense-right {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="card">
            <div class="header">
                <div>
                    <h1>â„ï¸ èŠåŠ å“¥ä¹‹æ—…è¨˜å¸³ ğŸ™ï¸</h1>
                    <p class="subtitle">Jan 21 - Jan 31, 2026 â€¢ Yunyi's Trip</p>
                </div>
                <button class="btn btn-primary" onclick="toggleForm()">
                    <span>â•</span>
                    æ–°å¢æ”¯å‡º
                </button>
            </div>

            <!-- Summary Cards -->
            <div class="grid">
                <div class="stat-card stat-card-blue">
                    <div class="stat-header">
                        <span class="stat-label">å¯¦éš›æ”¯å‡º</span>
                        <span style="font-size: 1.5rem;">ğŸ’µ</span>
                    </div>
                    <div class="stat-value" id="totalSpent">$0.00</div>
                    <div class="stat-subtext" id="totalSpentTWD">â‰ˆ NT$ 0</div>
                </div>

                <div class="stat-card stat-card-green">
                    <div class="stat-header">
                        <span class="stat-label">é ç®—ç¸½é¡</span>
                        <span style="font-size: 1.5rem;">ğŸ¯</span>
                    </div>
                    <div class="stat-value">$1,750</div>
                    <div class="stat-subtext">â‰ˆ NT$ 56,000</div>
                </div>

                <div class="stat-card" id="remainingCard">
                    <div class="stat-header">
                        <span class="stat-label">å‰©é¤˜é ç®—</span>
                        <span style="font-size: 1.5rem;">ğŸ“Š</span>
                    </div>
                    <div class="stat-value" id="remaining">$1,750</div>
                    <div class="stat-subtext" id="remainingStatus">é ç®—å…§ âœ“</div>
                </div>
            </div>
        </div>

        <!-- Add/Edit Form -->
        <div class="card hidden" id="formCard">
            <h2 id="formTitle">â• æ–°å¢æ”¯å‡º</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label>æ—¥æœŸ</label>
                    <select id="date">
                        <option value="">é¸æ“‡æ—¥æœŸ</option>
                        <option value="1/21">1/21</option>
                        <option value="1/22">1/22</option>
                        <option value="1/23">1/23</option>
                        <option value="1/24">1/24</option>
                        <option value="1/25">1/25</option>
                        <option value="1/26">1/26</option>
                        <option value="1/27">1/27</option>
                        <option value="1/28">1/28</option>
                        <option value="1/29">1/29</option>
                        <option value="1/30">1/30</option>
                        <option value="1/31">1/31</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>é¡åˆ¥</label>
                    <select id="category">
                        <option value="äº¤é€š">äº¤é€š</option>
                        <option value="é¤é£²">é¤é£²</option>
                        <option value="é–€ç¥¨å¨›æ¨‚">é–€ç¥¨å¨›æ¨‚</option>
                        <option value="è³¼ç‰©">è³¼ç‰©</option>
                        <option value="å…¶ä»–">å…¶ä»–</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>é …ç›®åç¨±</label>
                    <input type="text" id="item" placeholder="ä¾‹ï¼šNonnina æ™šé¤">
                </div>

                <div class="form-group">
                    <label>é‡‘é¡ (USD)</label>
                    <input type="number" id="amount" step="0.01" placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>åˆ†æ”¤äººæ•¸</label>
                    <select id="split">
                        <option value="1">1äºº (å€‹äºº)</option>
                        <option value="2" selected>2äºº</option>
                        <option value="3">3äºº</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>å‚™è¨»</label>
                    <input type="text" id="notes" placeholder="é¸å¡«">
                </div>
            </div>

            <div style="display: flex; gap: 0.5rem;">
                <button class="btn btn-primary" onclick="saveExpense()">
                    <span>âœ“</span>
                    <span id="saveText">æ–°å¢</span>
                </button>
                <button class="btn btn-secondary" onclick="cancelForm()">
                    <span>âœ•</span>
                    å–æ¶ˆ
                </button>
            </div>
        </div>

        <!-- Budget Progress -->
        <div class="card">
            <h2>é ç®—é€²åº¦</h2>
            <div id="budgetProgress"></div>
        </div>

        <!-- Expense List -->
        <div class="card">
            <h2>æ”¯å‡ºæ˜ç´°</h2>
            <div id="expenseList"></div>
        </div>

        <!-- Footer -->
        <div class="footer">
            ğŸ’± åŒ¯ç‡ï¼š1 USD = 32 TWD
        </div>
    </div>

    <script>
        const EXCHANGE_RATE = 32;
        const BUDGET = {
            'äº¤é€š': 165,
            'é¤é£²': 1000,
            'é–€ç¥¨å¨›æ¨‚': 285,
            'è³¼ç‰©': 200,
            'å…¶ä»–': 100
        };
        const DATES = ['1/21', '1/22', '1/23', '1/24', '1/25', '1/26', '1/27', '1/28', '1/29', '1/30', '1/31'];
        
        let expenses = [];
        let editingId = null;

        function toggleForm() {
            const formCard = document.getElementById('formCard');
            formCard.classList.toggle('hidden');
            if (!formCard.classList.contains('hidden')) {
                document.getElementById('item').focus();
            }
        }

        function cancelForm() {
            document.getElementById('formCard').classList.add('hidden');
            resetForm();
        }

        function resetForm() {
            document.getElementById('date').value = '';
            document.getElementById('category').value = 'é¤é£²';
            document.getElementById('item').value = '';
            document.getElementById('amount').value = '';
            document.getElementById('split').value = '2';
            document.getElementById('notes').value = '';
            editingId = null;
            document.getElementById('formTitle').textContent = 'â• æ–°å¢æ”¯å‡º';
            document.getElementById('saveText').textContent = 'æ–°å¢';
        }

        function saveExpense() {
            const date = document.getElementById('date').value;
            const category = document.getElementById('category').value;
            const item = document.getElementById('item').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const split = parseInt(document.getElementById('split').value);
            const notes = document.getElementById('notes').value;

            if (!date || !item || !amount) {
                alert('è«‹å¡«å¯«å¿…å¡«æ¬„ä½ï¼ˆæ—¥æœŸã€é …ç›®åç¨±ã€é‡‘é¡ï¼‰');
                return;
            }

            if (editingId !== null) {
                const index = expenses.findIndex(e => e.id === editingId);
                expenses[index] = { id: editingId, date, category, item, amount, split, notes };
            } else {
                expenses.push({
                    id: Date.now(),
                    date,
                    category,
                    item,
                    amount,
                    split,
                    notes
                });
            }

            cancelForm();
            render();
        }

        function editExpense(id) {
            const expense = expenses.find(e => e.id === id);
            if (!expense) return;

            document.getElementById('date').value = expense.date;
            document.getElementById('category').value = expense.category;
            document.getElementById('item').value = expense.item;
            document.getElementById('amount').value = expense.amount;
            document.getElementById('split').value = expense.split;
            document.getElementById('notes').value = expense.notes;

            editingId = id;
            document.getElementById('formTitle').textContent = 'âœï¸ ç·¨è¼¯æ”¯å‡º';
            document.getElementById('saveText').textContent = 'æ›´æ–°';
            document.getElementById('formCard').classList.remove('hidden');
        }

        function deleteExpense(id) {
            if (confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†æ”¯å‡ºå—ï¼Ÿ')) {
                expenses = expenses.filter(e => e.id !== id);
                render();
            }
        }

        function calculatePersonalAmount(amount, split) {
            return amount / split;
        }

        function getTotalSpent() {
            return expenses.reduce((sum, exp) => sum + calculatePersonalAmount(exp.amount, exp.split), 0);
        }

        function getTotalBudget() {
            return Object.values(BUDGET).reduce((sum, val) => sum + val, 0);
        }

        function getCategoryTotal(category) {
            return expenses
                .filter(exp => exp.category === category)
                .reduce((sum, exp) => sum + calculatePersonalAmount(exp.amount, exp.split), 0);
        }

        function render() {
            renderSummary();
            renderBudgetProgress();
            renderExpenseList();
        }

        function renderSummary() {
            const totalSpent = getTotalSpent();
            const totalBudget = getTotalBudget();
            const remaining = totalBudget - totalSpent;

            document.getElementById('totalSpent').textContent = `$${totalSpent.toFixed(2)}`;
            document.getElementById('totalSpentTWD').textContent = `â‰ˆ NT$ ${(totalSpent * EXCHANGE_RATE).toLocaleString()}`;
            document.getElementById('remaining').textContent = `$${remaining.toFixed(2)}`;
            
            const remainingCard = document.getElementById('remainingCard');
            if (remaining >= 0) {
                remainingCard.className = 'stat-card stat-card-purple';
                document.getElementById('remainingStatus').textContent = 'é ç®—å…§ âœ“';
            } else {
                remainingCard.className = 'stat-card stat-card-red';
                document.getElementById('remainingStatus').textContent = 'è¶…æ”¯ âš ';
            }
        }

        function renderBudgetProgress() {
            const container = document.getElementById('budgetProgress');
            container.innerHTML = '';

            Object.keys(BUDGET).forEach(category => {
                const spent = getCategoryTotal(category);
                const budget = BUDGET[category];
                const percentage = budget > 0 ? (spent / budget) * 100 : 0;
                
                let colorClass = 'progress-green';
                if (percentage > 100) colorClass = 'progress-red';
                else if (percentage > 80) colorClass = 'progress-yellow';

                const item = document.createElement('div');
                item.className = 'progress-item';
                item.innerHTML = `
                    <div class="progress-header">
                        <span class="progress-label">${category}</span>
                        <span class="progress-value">$${spent.toFixed(2)} / $${budget}</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill ${colorClass}" style="width: ${Math.min(percentage, 100)}%"></div>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function renderExpenseList() {
            const container = document.getElementById('expenseList');
            
            if (expenses.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“…</div>
                        <p class="empty-text">é‚„æ²’æœ‰ä»»ä½•æ”¯å‡ºè¨˜éŒ„</p>
                        <p class="empty-subtext">é»æ“Šä¸Šæ–¹ã€Œæ–°å¢æ”¯å‡ºã€é–‹å§‹è¨˜å¸³</p>
                    </div>
                `;
                return;
            }

            const sortedExpenses = [...expenses].sort((a, b) => DATES.indexOf(a.date) - DATES.indexOf(b.date));
            
            container.innerHTML = '<div class="expense-list"></div>';
            const list = container.querySelector('.expense-list');

            sortedExpenses.forEach(expense => {
                const personalAmount = calculatePersonalAmount(expense.amount, expense.split);
                const item = document.createElement('div');
                item.className = 'expense-item';
                item.innerHTML = `
                    <div class="expense-content">
                        <div class="expense-info">
                            <div class="expense-tags">
                                <span class="tag tag-blue">${expense.date}</span>
                                <span class="tag tag-gray">${expense.category}</span>
                                ${expense.split > 1 ? `<span class="tag tag-cyan">ğŸ‘¥ ${expense.split}äººåˆ†æ”¤</span>` : ''}
                            </div>
                            <div class="expense-name">${expense.item}</div>
                            ${expense.notes ? `<div class="expense-notes">${expense.notes}</div>` : ''}
                        </div>
                        <div class="expense-right">
                            <div class="expense-amount">
                                <div class="amount-main">$${personalAmount.toFixed(2)}</div>
                                ${expense.split > 1 ? `<div class="amount-sub">ç¸½é¡ $${expense.amount.toFixed(2)}</div>` : ''}
                                <div class="amount-sub">NT$ ${(personalAmount * EXCHANGE_RATE).toFixed(0)}</div>
                            </div>
                            <div class="expense-actions">
                                <button class="btn btn-edit" onclick="editExpense(${expense.id})">âœï¸</button>
                                <button class="btn btn-delete" onclick="deleteExpense(${expense.id})">ğŸ—‘ï¸</button>
                            </div>
                        </div>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        // Initial render
        render();
    </script>
</body>
</html>
